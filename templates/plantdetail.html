{% extends 'base.html' %} {% block content %} 
{% comment %} to display plant type details {% endcomment %}
<div class="mx-auto">
    <div class="card" style="width: 55rem;">
        <div class="row" style="--bs-gutter-x: 0">
            <div class="card-header text-center">
                <h1>Plant Details</h1>
                <strong><h2 style="color: #778F48">{{ plant.planttype.name }}</h2></strong>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="card-body" >
                    <img
                        src="{{ plant.planttype.photo.url }}"
                        class="img-responsive"
                        style="width: 30rem; padding: 1rem"
                    />
                </div>
            </div>
            <div class="col-6">
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <h4>Common Name:  {{plant.planttype.common_name}}</h4>
                        </li>
                        <li class="list-group-item">
                            <h4>Sunlight Type:  {{plant.planttype.sunlight_type}}</h4>
                        </li>
                        <li class="list-group-item">
                            <h4>Watering Frequency:  {{plant.planttype.water_freq}}</h4>
                        </li>
                        <li class="list-group-item">
                            <h4>Soil Type:  {{plant.planttype.soil_type}}</h4>
                        </li>
                        <li class="list-group-item">
                            <h4>Moisture Level:  {{plant.planttype.moisture_level}}</h4>
                        </li>
                        <li class="list-group-item">
                            <h4>Common Problems:  {{plant.planttype.common_problems}}</h4>
                        </li>
                        {% if plant.planttype.notes %}
                        <li class="list-group-item">
                            <h4>Other Notes:  {{plant.planttype.notes}}</h4>
                        </li>
                        {% endif %}
                    </ul>
                    {% if plant.owner.username == 'admin' %}
                    <div class="mx-auto">
                        <a
                        href="/add_plant/{{plant.id}}/"
                        class="btn  btn-lg btn-outline-light"
                        style="background-color: #8f6479"
                        >Add plant to my profile</a
                        >
                    </div>
                    {% endif %} 
                </div>
            </div>
        </div>
    </div>
    <br/>
    {% comment %} if this is a personal plant display... {% endcomment %} 
    {% if plant.owner.username != 'admin' %}
    <div class="card" style="width: 48rem">
        <div class="card-header text-center">
            <h1>My Plant</h1>
            <a
                href="/remove_plant/{{plant.id}}/"
                class="btn btn-outline-light"
                style="background-color: #8f6479">
                    Remove plant from my profile
            </a>
        </div>
        <form class="card-body">
            {% comment %} <div class="col-6">
                <h3>Name: {{plant.nickname}}</h3>
            </div>
            <div class="col-6"> {% endcomment %}
            <form 
                method="get" 
                class="form-inline" 
                action="{% url 'plant' plant.id %}" 
                enctype="multipart/form-data"
            >
            {% csrf_token %} 
                <div class="form-group">
                    <label for="nickname"><h3>Name: {{plant.nickname}}</h3></label>
                    <input
                        type="text"
                        id="nickname"
                        name="nickname"
                        class="form-control"
                        placeholder="Change Plant Nickname"
                        aria-label="Change Plant Nickname"
                        aria-describedby="button-addon1"
                    />
                    <button
                        class="btn btn-outline-light"
                        style="background-color: #8f6479"
                        type="submit"
                        id="button-addon1"
                    >
                        Submit
                    </button>
                </div>
                {% if errors %}
                <a>{{ errors }}</a></br>
                {% endif %}
            </form>
            </div>
            {% comment %} <div class="col-8">
                <h4>My watering frequency: every {{plant.watering}} days</h4>
            </div> {% endcomment %}
            <div class="form-group">
            <form 
                method="get" 
                class="form-inline" 
                action="{% url 'plant' plant.id %}" 
                enctype="multipart/form-data"
            >
             {% csrf_token %} 
                <div class="form-group">
                    <label for="watering"><h4>My watering frequency: every {{plant.watering}} days</h4></label>
                    <input
                        type="number"
                        id="watering"
                        name="watering"
                        class="form-control"
                        placeholder="# of days"
                        aria-label="# of days"
                        aria-describedby="button-addon2"
                    />
                    <button
                        class="btn btn-outline-light"
                        type="submit"
                        id="button-addon2"
                        style="background-color: #8f6479"
                    >
                        Submit
                    </button>
                </div>
            {% if errors %}
            <a>{{ errors }}</a></br>
            {% endif %}
            </form>
            </div>
            {% if plant.watering %}
            <a
            class="btn btn-outline-light"
            style="background-color: #8f6479"
            href="/alt_watering/{{plant.id}}/"
            role="button">
                I watered this plant today!
            </a>
            {% endif %}
            <br />
        </form>
    </div>
    <br />
    <div class="card" style="width: 48rem">
        <div class="card-header text-center">
            <h1>My Plant Journal</h1>
            <div><a
                class="btn btn-outline-light"
                style="background-color: #8f6479"
                href="{% url 'new_entry' plant.id %}">
                    Create Journal Entry
                </a>
            </div>
        </div>
        {% for entry in journal %}
        <div class="card" style="width: 48rem">
            <div class="card-title">
                <div class="row" style="--bs-gutter-x: 0">
                    <h5 
                        class="text-center col-11" 
                        style="padding-top: 10px">
                            Posted On: {{entry.created}}
                    </h5> 
                    <a
                        href="/remove_entry/{{entry.id}}/"
                        class="btn btn-outline-danger col-1"
                        style="">
                            X
                    </a>
                </div>
            </div>
            <div class="card-body text-center">
                {% if entry.photo %}
                <img
                    src="{{ entry.photo.url }}"
                    class="img-thumbnail rounded float-start"
                    style="max-width: 20rem"
                />
                <div class="text-center float-right">
                    "{{entry.text}}"
                </div>
                {% else %}
                "{{entry.text}}"
                {% endif %}
            </div>
        </div>
        <br/>
        {% endfor %}
    </div>

    {% endif %} 
</div>
{% endblock %}
